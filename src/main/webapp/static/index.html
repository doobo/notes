<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" lang="zh_CN">
		<title>新建笔记</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- 引入 Bootstrap -->
		<link rel="stylesheet" href="../css/bootstrap.min.css" />
		<!-- HTML5 Shim 和 Respond.js 用于让 IE8 支持 HTML5元素和媒体查询 -->
		<!-- 注意： 如果通过 file://  引入 Respond.js 文件，则该文件无法起效果 -->
		<!--[if lt IE 9]>
		<script type="text/javascript" src="../js/html5shiv.js" ></script>
		<script type="text/javascript" src="../js/respond.min.js" ></script>
      <![endif]-->
		<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
		<script type="text/javascript" src="../js/jquery.min.js"></script>
		
		<!-- include codemirror (codemirror.css, codemirror.js, xml.js, formatting.js)-->
		<link rel="stylesheet" href="../js/CodeMirror/lib/codemirror.css">
		<link rel="stylesheet" href="../js/CodeMirror/theme/eclipse.css">

		<script type="text/javascript" src="../js/bootstrap.min.js"></script>
		<script type="text/javascript" src="../js/qiao.js"></script>
		<link rel="stylesheet" href="../css/summernote.css" />
		<script type="text/javascript" src="../js/summernote.min.js"></script>
		<script type="text/javascript" src="../js/summernote-zh-CN.js"></script>
		<script type="text/javascript" src="../js/code-prettify/prettify.js"></script>
		<link rel="stylesheet" href="../js/code-prettify/prettify.css" />
		<link rel="stylesheet" href="../js/select2/select2.min.css" />
		<script type="text/javascript" src="../js/select2/select2.min.js"></script>
		<script type="text/javascript" src="../js/jquery.scrollToTop.min.js"></script>
		<link rel="stylesheet" href="../css/style.css" />

		<!--AadminLTE基本资源-->
		<link rel="stylesheet" href="../css/font-awesome.min.css" />
		<script type="text/javascript" src="../js/AdminLTE/dist/js/app.js"></script>
	</head>

	<body>
		<div class="container">
			<div class="row clearfix">
				<a href="#top" id="toTop"></a>
				<nav class="navbar navbar-inverse" role="navigation">
					<div class="navbar-header">
						<a class="navbar-brand" href="#">个人学习笔记网</a>
					</div>
					<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
						<ul class="nav navbar-nav">
							<li>
								<a href="../index.html">首页</a>
							</li>
							<li class="active">
								<a href="#">新建笔记</a>
							</li>
							<li>
								<a href="#">功能介绍</a>
							</li>
							<li>
								<a href="#">高级搜索</a>
							</li>
						</ul>
						<form class="navbar-form navbar-left" role="search">
							<div class="form-group">
								<input type="text" class="form-control" placeholder="搜索笔记..." />
							</div> <button type="submit" class="btn btn-default">搜索</button>
						</form>
						<ul class="nav navbar-nav navbar-right">
							<li>
								<a href="../public/admin.html">登录</a>
							</li>
							<li>
								<a href="#">网站导航</a>
							</li>
						</ul>
					</div>
				</nav>
			</div>
			<!--The Header End-->
			
			<div class="row clearfix" style="margin-bottom: -15px; margin-top: -15px;">
				<div class="box box-default">
					<div class="box-header with-border">
						<h3 class="box-title">新建笔记-标题</h3>
						<div class="box-tools pull-right">
							<button type="button" class="btn btn-box-tool" data-widget="collapse">
								<i class="fa fa-minus"></i>
                			</button>
						</div>
					</div>
					<!-- /.box-header -->
					<div class="box-body">
					<form class="form-inline text-center">
						 <div class="form-group" style="margin-bottom: 20px;">
					        <label>标题：</label>
					    </div>
						<div class="form-group" style="margin-bottom: 20px;">
						<input type="text" size="50"
							class="form-control" 
							placeholder="请输入笔记标题..." />
						</div><br />
						
					    <div class="form-group">
					        <label>主分类：</label>
					    </div>
					    <div class="form-group">
					        <select id="mainType" class="js-example-data-array form-control">
							</select>
					    </div>
					    
					    <div class="form-group">
					        <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;子分类：</label>
					    </div>
					    <div class="form-group">
					        <select id="childType" class="js-example-data-array form-control">
							</select>
					    </div>
					    
					    <div class="form-group">
					       <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;分享状态：</label>
					    </div>
					    <div class="form-group">
					        <div class="btn-group-sm" id="share" data-toggle="buttons">
								<label class="btn btn-default active" style="height: 27px;">
									<input type="radio" name="share" class="toggle" value="0" checked="checked"> 分享
								</label>
								<label class="btn btn-default" style="height: 27px;">
									<input type="radio" name="share" class="toggle" value="1">不分享
							    </label>
							</div>
					    </div>
				   </form>
				</div>
			</div>
			</div>
			<div class="row clearfix">
				<div class="row clearfix">
					<div class="col-md-12">
						<div class="summernote" id="summernote"></div>
						<div class="row text-center" style="margin-bottom: 20px;">
							<label class="btn btn-default" id="btn_view">预览</label>
							<label class="btn btn-default" id="btn_edit">编辑</label>
							<label class="btn btn-default" id="btn_save">保存</label>
						</div>
						<!--文本区域-->
					</div>
				</div>
			</div>
			<!--富文本编辑器结束-->

			<div class="row">
				<div class="col-md-12 text-center footer">
					<span class="common">
			 	Copyright &copy;2017 湖南城市学院  
			 	<a class="common" href="http://www.hncu.net" target="_blank">hncu.net</a> 
			 	All Rights Reserved.
			 </span>
				</div>
			</div>
			<!--底部声明结束-->
		</div>
		<script type="text/javascript" src="../js/CodeMirror/lib/codemirror.js"></script>
		<script type="text/javascript" src="../js/CodeMirror/mode/javascript/javascript.js"></script>
		<script type="text/javascript" src="../js/CodeMirror/mode/xml/xml.js"></script>
		<script type="text/javascript" src="../js/CodeMirror/mode/htmlmixed/htmlmixed.js"></script>
		<script type="text/javascript" src="../js/CodeMirror/mode/xml/xml.js"></script>
		<script type="text/javascript" src="../js/CodeMirror/addon/fold/xml-fold.js"></script>
		<script type="text/javascript" src="../js/CodeMirror/addon/edit/closetag.js"></script>
		<script type="text/javascript" src="../js/CodeMirror/addon/edit/closebrackets.js"></script>
		<script type="text/javascript" src="../js/app.js"></script>
		<script type="text/javascript">
			$(function() {
				$('#summernote').summernote(noteConf);
				//返回顶部代码
				$("#toTop").scrollToTop(800);
				var data = [{ id: 0, text: 'Java编程基础' }, { id: 1, text: 'Web前端开发' },
					{ id: 2, text: '框架使用集合' }, { id: 3, text: '常用工具使用' }, { id: 4, text: 'Android开发手册' }, { id: 5, text: 'CSharp开发集合' }
				];
				$("#mainType").select2({
					data: data,
					theme: "classic"
				});
				$("#childType").select2({
					data: data,
					theme: "classic",
				});
			});
			$("#btn_save").click(function() {
				qiao.bs.confirm({
					titile: '确认提示框',
					msg: '你确定使用这个提示框吗',
					backdrop: false,
					style: 'margin-top: 100px;'
				}, function() { alert('点击了确认'); }, function() { alert('点击了取消！'); });
			});
			//预览视图
			$("#btn_view").click(function() {
				var makrup = $('#summernote').summernote('code');
				makrup=makrup.replace(new RegExp('<script[^]*>[\\s\\S]*?</'+'script>','gi'),'');
				console.log(removeHTMLTag(makrup));
				$('#summernote').summernote('code',makrup);
				$('#summernote').summernote('destroy');
			});
			//编辑视图
			$("#btn_edit").click(function() {
				noteConf['height'] = 'auto';
				noteConf['focus'] = false;
				$('#summernote').summernote(noteConf);
			});
			
			//去除字符串里面的html标签
			function removeHTMLTag(str) {
	           	str = str.replace(/<\/?[^>]*>/g,''); //去除HTML tag
	            str = str.replace(/[ | ]*\n/g,'\n'); //去除行尾空白
	            str = str.replace(/\n[\s| | ]*\r/g,'\n'); //去除多余空行
	            str=str.replace(/&nbsp;/ig,'');//去掉&nbsp;
	            return str;
    		}
			
		</script>
	</body>

</html>